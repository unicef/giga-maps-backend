<div style="padding-left: 20px; padding-right: 10px;">
<a href="https://giga.global/">
    <img src="https://s41713.pcdn.co/wp-content/uploads/2018/11/2020.05_GIGA-visual-identity-guidelines_v1-25.png" alt="Giga logo" title="Giga" align="right" height="60" style="padding-top: 10px;"/>
</a>

<div style="padding-top: 20px;"> </div>
<h1><a id="gigamaps" class="anchor" aria-hidden="true" href="#gigamaps"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"></path></svg></a>
Giga Maps Backend </h1> 

<div align="center" >

<!--- These are examples. See https://shields.io for others or to customize this set of shields. You might want to include dependencies, project status and licence info here --->
![GitHub repo size](https://img.shields.io/github/repo-size/unicef/giga-maps-backend)
![GitHub stars](https://img.shields.io/github/stars/unicef/giga-maps-backend)
![Twitter Follow](https://img.shields.io/twitter/follow/backend)
![License](https://img.shields.io/github/license/unicef/giga-maps-backend)


</div>


<p align="center">
	<img src="https://img.shields.io/badge/GNU%20Bash-4EAA25.svg?style=flat&logo=GNU-Bash&logoColor=white" alt="GNU%20Bash">
	<img src="https://img.shields.io/badge/scikitlearn-F7931E.svg?style=flat&logo=scikit-learn&logoColor=white" alt="scikitlearn">
	<img src="https://img.shields.io/badge/HTML5-E34F26.svg?style=flat&logo=HTML5&logoColor=white" alt="HTML5">
	<img src="https://img.shields.io/badge/YAML-CB171E.svg?style=flat&logo=YAML&logoColor=white" alt="YAML">
	<img src="https://img.shields.io/badge/SciPy-8CAAE6.svg?style=flat&logo=SciPy&logoColor=white" alt="SciPy">
	<img src="https://img.shields.io/badge/Gunicorn-499848.svg?style=flat&logo=Gunicorn&logoColor=white" alt="Gunicorn">
	<img src="https://img.shields.io/badge/Celery-37814A.svg?style=flat&logo=Celery&logoColor=white" alt="Celery">
	<br>
	<img src="https://img.shields.io/badge/Python-3776AB.svg?style=flat&logo=Python&logoColor=white" alt="Python">
	<img src="https://img.shields.io/badge/Docker-2496ED.svg?style=flat&logo=Docker&logoColor=white" alt="Docker">
	<img src="https://img.shields.io/badge/GitHub%20Actions-2088FF.svg?style=flat&logo=GitHub-Actions&logoColor=white" alt="GitHub%20Actions">
	<img src="https://img.shields.io/badge/Django-092E20.svg?style=flat&logo=Django&logoColor=white" alt="Django">
	<img src="https://img.shields.io/badge/NumPy-013243.svg?style=flat&logo=NumPy&logoColor=white" alt="NumPy">
	<img src="https://img.shields.io/badge/JSON-000000.svg?style=flat&logo=JSON&logoColor=white" alt="JSON">
	<img src="https://img.shields.io/badge/Flask-000000.svg?style=flat&logo=Flask&logoColor=white" alt="Flask">
</p>

<br>

<details open="open">
	<summary style="padding-bottom: 10px;"><h2>Table of Contents</h2></summary>
  <ol>
    <li><a href="#about-giga">About Giga</a></li>
    <li><a href="#about-gigamaps">What is Giga Maps</a>
    <ul>
        <li><a href="#why-it-is-important">Why it is important?</a></li>
        <li><a href="#giga-maps-repos">Github Repositories of Giga Maps</a></li>
      </ul>
      </li>
    <li><a href="#school-location">School Location</a></li>
    <li><a href="#school-connectivity">School Connectivity</a></li>
    <li><a href="#infrastructure">Infrastructure</a></li>
	<li>
      <a href="#getting-started">Getting Started</a>
    </li>
    <li><a href="#code-of-conduct">Code of Conduct</a></li>
    <li><a href="#contribution-guidelines">Contribution Guidelines</a></li>
    <li><a href="#license">License/Legal</a></li>
    <li><a href="#contact">Contact</a></li>
    <li><a href="#acknowledgements">Acknowledgements</a></li>
  </ol>
</details>

<h2><a id="about-giga" class="anchor" aria-hidden="true" href="#about-giga"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"></path></svg></a>About Giga</h2>

Giga is a UNICEF-ITU global initiative to connect every school to the Internet and every young person to information, opportunity, and choice. By connecting all schools to the Internet, we ensure that every child has a fair shot at success in an increasingly digital world.

<h2><a id="about-gigamaps" class="anchor" aria-hidden="true" href="#about-gigamaps"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"></path></svg></a>
What is Giga Maps?</h2>

Giga Maps aims to build a global, dynamic map that showcases the status of school connectivity in the world. This tool helps to identify gaps in school connectivity, create transparency, estimate the capital investment needed to connect unconnected schools, develop plans, attract the necessary funding, and track progress towards achieving universal school Internet connectivity.

<h3><a id="why-it-is-important" class="anchor" aria-hidden="true" href="#why-it-is-important"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"></path></svg></a>
Why it is important? </h3>
<p></p>

Mapping schools is important because we can't solve a problem if we don't know the problem. Giga's mission is to connect every school to the internet and for that, we need to know accurate info on each school location, their connectivity and their infrastructure.

We need to put it on an open map because this is a global project with multiple stakeholders like governments, donors, investors, UNICEF implementation country offices, Internet service providers, partners, schools, open source community and of course, Giga. All of them need to have a common tool through which they can see the progress in connecting schools, highlight its importance and bring actionable clarity and transparency into the process. So, Giga Maps is this common narrative tool for all Giga members and stakeholders.


<h3><a id="giga-maps-repos" class="anchor" aria-hidden="true" href="#giga-maps-repos"><svg class="octicon octicon-link" align="center" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"></path></svg></a>
Github Repositories of Giga Maps </h3>

- [Giga Maps Frontend](https://github.com/unicef/giga-maps-frontend/)
- [Giga Maps Backend](https://github.com/unicef/giga-maps-backend/)
- [Giga – documentation](#)


<h2><a id="school-location" class="anchor" aria-hidden="true" href="#school-location"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"></path></svg></a>
School Location</h2>

#### Locate schools through our open map
2.1M schools location collected from 50 government bodies, Open data sources like OSM and Giga's AI model.

<h2><a id="school-connectivity" class="anchor" aria-hidden="true" href="#school-connectivity"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"></path></svg></a>
School Connectivity</h2>

#### Monitor real-time connectivity of schools
Real time connectivity monitored through GigaCheck Desktop App and chrome extension, Brazil's nic.br app and multiple ISP collaborations.

<h2><a id="infrastructure" class="anchor" aria-hidden="true" href="#infrastructure"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"></path></svg></a>
Infrastructure</h2>

#### Understand connectivity infrastructure available around schools
Infrastructure data contributed by ~10 partners like ITU, Meta, GSMA, and government bodies.

### Tasks

| Sr <br/>No | Task Name                                                         | Path                                                                                       | Description                                                                             | Frequency                                     |
|------------|-------------------------------------------------------------------|--------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------|-----------------------------------------------|
| 1.         | update_all_cached_values                                          | proco.utils.tasks.update_all_cached_values                                                 | Update cached values in Backend Redis                                                   | 4:00 AM Every day                             |
| 2.         | rebuild_school_index                                              | proco.utils.tasks.rebuild_school_index                                                     | Create the Cognitive Search Index                                                       | 2:00 AM Every day                             |
| 3.         | clean_old_realtime_data                                           | proco.connection_statistics.tasks.clean_old_realtime_data                                  | Delete more than 30 days old data from RealTimeConnectivity table                       | 5:00 AM Every day                             |
| 4.         | update_school_records                                             | proco.schools.tasks.update_school_records                                                  | Populate the connectivity_status and coverage_status field in School table              | 1:00 AM, 1:00 PM Every day                    |
| 5.         | cleanup_school_master_rows                                        | proco.data_sources.tasks.cleanup_school_master_rows                                        | Cleanup School Master data                                                              | 1:40 AM, 3:40 PM Every day                    |
| 6.         | update_static_data                                                | proco.data_sources.tasks.update_static_data                                                | Fetch the data from School Master data source                                           | 3:00 AM Every day                             |
| 7.         | update_live_data                                                  | proco.data_sources.tasks.update_live_data                                                  | Fetch the live data from PCDC and QoS data source                                       | 2:10 AM, 8:10 AM, 2:10 PM , 8:10 PM Every day |
| 8.         | update_live_data_and_aggregate_yesterday_data                     | proco.data_sources.tasks.update_live_data                                                  | Fetch the latest live data and aggregate the previous daya data                         | 00:30 AM every day                            |
| 9.         | populate_school_registration_data                                 | proco.utils.tasks.populate_school_registration_data                                        | Populate the RT status for newly added schools in Live/Static data source               | 2:40 AM Every day                             |                                              |
| 10.        | handle_published_school_master_data_row                           | proco.data_sources.tasks.handle_published_school_master_data_row                           | Handle Published School Master data records                                             | Every 4 hour at 10th minute                   |
| 11.        | handle_deleted_school_master_data_row                             | proco.data_sources.tasks.handle_deleted_school_master_data_row                             | Delete the School from Proco DB if deleted by School Master data source                 | 00:10 AM every day                            |
| 12.        | email_reminder_to_editor_and_publisher_for_review_waiting_records | proco.data_sources.tasks.email_reminder_to_editor_and_publisher_for_review_waiting_records | Send reminder mail to Editors and Publishers to review the School Master records if any | 08:10 AM every day                            |
| 13.        | clean_old_live_data                                               | proco.data_sources.tasks.clean_old_live_data                                               | Cleanup for QoS and PCDC source data table for data older than 30 days                  | 05:10 AM every day                            |


##  Getting Started
###  Prerequisites

**Python**: `version 3.8`

###  Installation

Build the project from source:

1. Clone the giga-maps-backend repository:
```sh
❯ git clone https://github.com/unicef/giga-maps-backend
```

2. Navigate to the project directory:
```sh
❯ cd giga-maps-backend
```

3. Install the required dependencies:

You can create a requirements.txt file first with the following command
```sh
❯ pip freeze > requirements.txt
```

Then you can convert a Pipfile and Pipfile.lock into a requirements.txt.
```sh
❯ pipenv lock -r > requirements.txt
```

After that, you can install all your modules in your python virtual environment by doing the following:
```sh
❯ pip install -r requirements.txt
```

###  Usage

To run the project, execute the following command:

```sh
❯ python main.py
```

###  Tests

Execute the test suite using the following command:

```sh
❯ pytest
```

---


##  Repository Structure

```sh
└── giga-maps-backend/
    ├── .github
    │   ├── dependabot.yml
    │   └── workflows
    ├── Dockerfile
    ├── Pipfile
    ├── Pipfile.lock
    ├── README.md
    ├── azure-pipeline-dev.yml
    ├── celery-dev.sh
    ├── celery.sh
    ├── celerybeat.sh
    ├── config
    │   ├── __init__.py
    │   ├── settings
    │   ├── urls.py
    │   ├── utils.py
    │   └── wsgi.py
    ├── data_sources.json
    ├── deploy
    │   └── server.py
    ├── docker
    │   ├── Dockerfile
    │   ├── Dockerfile-db
    │   ├── Dockerfile-db15
    │   ├── Dockerfile-dev
    │   ├── docker-compose.dev.yml
    │   ├── docker-compose.test.yml
    │   ├── docker-compose.yml
    │   ├── initdb copy.sh
    │   └── initdb.sh
    ├── hello.py
    ├── manage.py
    ├── proco
    │   ├── __init__.py
    │   ├── about_us
    │   ├── accounts
    │   ├── assets
    │   ├── background
    │   ├── connection_statistics
    │   ├── contact
    │   ├── context_processors.py
    │   ├── core
    │   ├── custom_auth
    │   ├── data_sources
    │   ├── fixtures
    │   ├── locations
    │   ├── mailing
    │   ├── proco_data_migrations
    │   ├── schools
    │   ├── taskapp
    │   ├── templates
    │   └── utils
    ├── scripts
    │   ├── runtests.sh
    │   └── wait-for-it.sh
    ├── sshd_config
    ├── web-flask.sh
    └── web-worker.sh
```

---

In the root directory of the application, you will find the configuration files for the development and build process. These include configuration files for code linting, the Jest configuration for the UI testing tool, and files for deployment with Docker. The source code is located in the src/ directory. The webpack/ directory contains the environment configuration and webpack configuration files.

Additionally, the jest.config.js file is used to configure Jest for UI testing. It specifies the test environment, the test files to be run, and the module name mapping.

<h2><a id="code-of-conduct" class="anchor" aria-hidden="true" href="#code-of-conduct"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"></path></svg></a>
Code of Conduct</h2>

At Giga, we're committed to maintaining an environment that's respectful, inclusive, and harassment-free for everyone involved in our project and community. We welcome contributors and participants from diverse backgrounds and pledge to uphold the standards. 


[Click here for detailed Code of Conduct](#)


<h2><a id="contribution-guidelines" class="anchor" aria-hidden="true" href="#contribution-guidelines"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"></path></svg></a>
Contribution Guidelines</h2>

Contributions are welcome! Here are several ways you can contribute:

- **[Report Issues](https://github.com/unicef/giga-maps-backend/issues)**: Submit bugs found or log feature requests for the `giga-maps-backend` project.
- **[Submit Pull Requests](https://github.com/unicef/giga-maps-backend/blob/main/CONTRIBUTING.md)**: Review open PRs, and submit your own PRs.
- **[Join the Discussions](https://github.com/unicef/giga-maps-backend/discussions)**: Share your insights, provide feedback, or ask questions.

If you feel impacted by the work we are doing and would like to contirbute through monetary means then consider donating at <b>https://give.giga.global</b>

<details closed>
<summary>Contributing Guidelines</summary>

1. **Fork the Repository**: Start by forking the project repository to your github account.
2. **Clone Locally**: Clone the forked repository to your local machine using a git client.
   ```sh
   git clone https://github.com/unicef/giga-maps-backend
   ```
3. **Create a New Branch**: Always work on a new branch, giving it a descriptive name.
   ```sh
   git checkout -b new-feature-x
   ```
4. **Make Your Changes**: Develop and test your changes locally.
5. **Commit Your Changes**: Commit with a clear message describing your updates.
   ```sh
   git commit -m 'Implemented new feature x.'
   ```
6. **Push to github**: Push the changes to your forked repository.
   ```sh
   git push origin new-feature-x
   ```
7. **Submit a Pull Request**: Create a PR against the original project repository. Clearly describe the changes and their motivations.
8. **Review**: Once your PR is reviewed and approved, it will be merged into the main branch. Congratulations on your contribution!
</details>

<details closed>
<summary>Contributor Graph</summary>
<br>
<p align="left">
   <a href="https://github.com{/unicef/giga-maps-backend/}graphs/contributors">
      <img src="https://contrib.rocks/image?repo=unicef/giga-maps-backend">
   </a>
</p>
</details>

---

<h2><a id="license" class="anchor" aria-hidden="true" href="#license"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"></path></svg></a>
License / Legal</h2>

This program is free software: you can redistribute it and/or modify
it under the terms of the GNU Affero General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
GNU Affero General Public License for more details.

You should have received a copy of the GNU Affero General Public License
along with this program.
See [LICENSE](https://github.com/unicef/giga-maps-backend/blob/main/LICENSE) for more information.

For the plain text version please see <https://www.gnu.org/licenses/agpl-3.0.txt>

<h2><a id="contact" class="anchor" aria-hidden="true" href="#contact"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"></path></svg></a>
Contact</h2>

GigaMaps Project Lead: Shilpa Arora: sharora@unicef.org 

GigaMaps Project Member: Vipul Bhavsar: vbhavsar@unicef.org 

Giga Open-Source Community Manager: David Njagah: dnjagah@unicef.org 

Giga Website: https://giga.global/contact-us/ 

<br>

<h2><a id="acknowledgements" class="anchor" aria-hidden="true" href="#acknowledgements"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"></path></svg></a>
Acknowledgments💜</h2> 

* Thanks to the Nagarro team for helping build this application!

</div>

